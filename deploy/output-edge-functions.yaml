AWSTemplateFormatVersion: 2010-09-09
Outputs:
  OriginRequestFunctionArn:
    Value:
      Fn::GetAtt:
      - OriginRequestFunction
      - Arn
  RoleArn:
    Value:
      Fn::GetAtt:
      - EdgeLambdaRole
      - Arn
  ViewerRequestFunctionArn:
    Value:
      Fn::GetAtt:
      - ViewerRequestFunction
      - Arn
Resources:
  EdgeLambdaRole:
    Properties:
      AssumeRolePolicyDocument:
        Statement:
          Action:
          - sts:AssumeRole
          Effect: Allow
          Principal:
            Service:
            - lambda.amazonaws.com
            - edgelambda.amazonaws.com
        Version: '2012-10-17'
      ManagedPolicyArns:
      - arn:aws:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
      Path: /service-role/
    Type: AWS::IAM::Role
  OriginRequestFunction:
    Properties:
      CodeUri: s3://temp-code-imageresize-9199435071c36b7a/0ce2b7b54a646b530d3e10d8c91538a2
      Handler: index.handler
      MemorySize: 128
      Role:
        Fn::GetAtt:
        - EdgeLambdaRole
        - Arn
      Runtime: nodejs6.10
      Timeout: 3
    Type: AWS::Serverless::Function
  ViewerRequestFunction:
    Properties:
      CodeUri: s3://temp-code-imageresize-9199435071c36b7a/f8f0803c24ac01a567cd1ae98dd0e6ce
      Handler: index.handler
      MemorySize: 128
      Role:
        Fn::GetAtt:
        - EdgeLambdaRole
        - Arn
      Runtime: nodejs6.10
      Timeout: 1
    Type: AWS::Serverless::Function
Transform: AWS::Serverless-2016-10-31
